<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Floating Timer Widget</title>
<style>
    body {
        margin: 0;
        background: #1e1e1e;
        height: 200vh;
        user-select: none; /* Prevent dragging highlighting */
    }

    .timer-widget {
        position: fixed;
        top: 40px;
        left: 40px;
        background: #333;
        color: #f5e96e;
        width: 220px;
        padding: 15px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        font-family: Arial, sans-serif;
        z-index: 999999; /* Always on top */
        cursor: grab;
    }

    .inputs input {
        width: 42px;
        padding: 3px;
        font-size: 12px;
        text-align: center;
        border-radius: 5px;
        border: none;
    }

    .timer-display {
        font-size: 30px;
        text-align: center;
        font-weight: bold;
        margin: 8px 0;
    }

    button {
        padding: 5px 10px;
        margin: 2px;
        font-size: 11px;
        border-radius: 6px;
        border: none;
        font-weight: bold;
        cursor: pointer;
        background: #f5e96e;
        color: #333;
    }
</style>
</head>
<body>

<div class="timer-widget" id="dragWidget">
    <div style="font-size:16px; font-weight:bold; text-align:center;">Meeting Timer</div>

    <div class="inputs" style="text-align:center; margin-bottom:8px; font-size:12px;">
        <input id="hoursInput" type="number" value="0" min="0">h
        <input id="minutesInput" type="number" value="30" min="0">m
        <input id="secondsInput" type="number" value="0" min="0">s
    </div>

    <div class="timer-display" id="timer">00:00:00</div>

    <div style="text-align:center;">
        <button onclick="startTimer()">Start</button>
        <button onclick="pauseTimer()">Pause</button><br>
        <button onclick="resetTimer()">Reset</button>
        <button onclick="endTimer()">End</button>
    </div>
</div>

<script>
    // TIMER LOGIC
    let timerInterval;
    let remainingSeconds = 0;
    let paused = false;

    function updateDisplay() {
        let hrs = Math.floor(remainingSeconds / 3600);
        let mins = Math.floor((remainingSeconds % 3600) / 60);
        let secs = remainingSeconds % 60;
        document.getElementById("timer").textContent =
            `${String(hrs).padStart(2, "0")}:${String(mins).padStart(2, "0")}:${String(secs).padStart(2, "0")}`;
    }

    function startTimer() {
        if (!paused) {
            const h = parseInt(hoursInput.value) || 0;
            const m = parseInt(minutesInput.value) || 0;
            const s = parseInt(secondsInput.value) || 0;
            remainingSeconds = h * 3600 + m * 60 + s;
        }
        paused = false;

        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            if (remainingSeconds <= 0) {
                clearInterval(timerInterval);
                return;
            }
            remainingSeconds--;
            updateDisplay();
        }, 1000);
    }

    function pauseTimer() {
        paused = true;
        clearInterval(timerInterval);
    }

    function resetTimer() {
        paused = false;
        clearInterval(timerInterval);
        const h = parseInt(hoursInput.value) || 0;
        const m = parseInt(minutesInput.value) || 0;
        const s = parseInt(secondsInput.value) || 0;
        remainingSeconds = h * 3600 + m * 60 + s;
        updateDisplay();
    }

    function endTimer() {
        clearInterval(timerInterval);
        remainingSeconds = 0;
        updateDisplay();
    }

    updateDisplay();

    // DRAGGING LOGIC (FULL FIX)
    const widget = document.getElementById("dragWidget");
    let isDragging = false;
    let offsetX = 0;
    let offsetY = 0;

    widget.addEventListener("mousedown", (e) => {
        isDragging = true;
        widget.style.cursor = "grabbing";

        offsetX = e.clientX - widget.offsetLeft;
        offsetY = e.clientY - widget.offsetTop;
    });
